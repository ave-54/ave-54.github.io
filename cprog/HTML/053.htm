<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=Edit-Time-Data href="053%20Структурированный%20тип.files/editdata.mso">
<title>5.3. Структурированный тип</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>www.PHILka.RU</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>vtpc112</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>354</o:TotalTime>
  <o:Created>2008-11-27T08:24:00Z</o:Created>
  <o:LastSaved>2008-11-27T08:24:00Z</o:LastSaved>
  <o:Pages>6</o:Pages>
  <o:Words>1946</o:Words>
  <o:Characters>11098</o:Characters>
  <o:Company>NSTU_VT</o:Company>
  <o:Bytes>11776</o:Bytes>
  <o:Lines>92</o:Lines>
  <o:Paragraphs>26</o:Paragraphs>
  <o:CharactersWithSpaces>13018</o:CharactersWithSpaces>
  <o:Version>11.6360</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:DoNotHyphenateCaps/>
  <w:DrawingGridHorizontalSpacing>0,55 пт</w:DrawingGridHorizontalSpacing>
  <w:DrawingGridVerticalSpacing>0,55 пт</w:DrawingGridVerticalSpacing>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>0</w:DisplayVerticalDrawingGridEvery>
  <w:UseMarginsForDrawingGridOrigin/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DrawingGridVerticalOrigin>99,25 пт</w:DrawingGridVerticalOrigin>
  <w:Compatibility>
   <w:WW6BorderRules/>
   <w:FootnoteLayoutLikeWW8/>
   <w:ShapeLayoutLikeWW8/>
   <w:AlignTablesRowByRow/>
   <w:ForgetLastTabAlignment/>
   <w:LayoutRawTableWidth/>
   <w:LayoutTableRowsApart/>
   <w:UseWord97LineBreakingRules/>
   <w:SelectEntireFieldWithStartOrEnd/>
   <w:UseWord2002TableStyleRules/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:"Times New Roman CYR";
	panose-1:2 2 6 3 5 4 5 2 3 4;
	mso-font-charset:204;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:536902279 -2147483648 8 0 511 0;}
@font-face
	{font-family:"Arial CYR";
	panose-1:2 11 6 4 2 2 2 2 2 4;
	mso-font-charset:204;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:536902279 -2147483648 8 0 511 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman CYR";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
h1
	{mso-style-next:Обычный;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Arial CYR";
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:14.0pt;
	mso-bidi-font-weight:normal;}
h2
	{mso-style-next:Обычный;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Arial CYR";
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-font-weight:normal;
	font-style:italic;
	mso-bidi-font-style:normal;}
h3
	{mso-style-next:Обычный;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Arial CYR";
	mso-bidi-font-family:"Times New Roman";
	font-weight:normal;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:center 8.0cm right 16.0cm;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-ansi-language:EN-US;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:center 8.0cm right 16.0cm;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-ansi-language:EN-US;}
p.a, li.a, div.a
	{mso-style-name:текст;
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:36.0pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman CYR";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.a0, li.a0, div.a0
	{mso-style-name:программа;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.a1, li.a1, div.a1
	{mso-style-name:список;
	mso-style-parent:текст;
	margin-top:6.0pt;
	margin-right:18.45pt;
	margin-bottom:0cm;
	margin-left:64.35pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:-18.0pt;
	mso-pagination:widow-orphan;
	mso-list:l1 level1 lfo1;
	tab-stops:42.55pt list 64.35pt;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman CYR";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.a2, li.a2, div.a2
	{mso-style-name:определение;
	mso-style-parent:текст;
	margin-top:12.0pt;
	margin-right:32.9pt;
	margin-bottom:12.0pt;
	margin-left:35.45pt;
	text-align:justify;
	text-indent:.55pt;
	mso-pagination:widow-orphan;
	border:none;
	mso-border-alt:solid windowtext 1.5pt;
	padding:0cm;
	mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Arial CYR";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.a3, li.a3, div.a3
	{mso-style-name:эпиграф;
	margin-top:0cm;
	margin-right:32.9pt;
	margin-bottom:0cm;
	margin-left:5.0cm;
	margin-bottom:.0001pt;
	text-align:right;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Arial CYR";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	font-style:italic;
	mso-bidi-font-style:normal;}
p.a4, li.a4, div.a4
	{mso-style-name:"от края";
	mso-style-parent:текст;
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman CYR";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.a5, li.a5, div.a5
	{mso-style-name:Формула;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	mso-ansi-language:EN-US;
	layout-grid-mode:line;
	font-weight:bold;
	mso-bidi-font-weight:normal;}
p.a6, li.a6, div.a6
	{mso-style-name:"без формата";
	mso-style-parent:программа;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.a7, li.a7, div.a7
	{mso-style-name:стихи;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:36.0pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman CYR";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.1, li.1, div.1
	{mso-style-name:эпиграф1;
	mso-style-parent:эпиграф;
	margin-top:0cm;
	margin-right:9.35pt;
	margin-bottom:0cm;
	margin-left:9.0cm;
	margin-bottom:.0001pt;
	text-align:right;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Arial CYR";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";
	font-style:italic;
	mso-bidi-font-style:normal;}
span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
 /* Page Definitions */
 @page
	{mso-footnote-separator:url("053%20Структурированный%20тип.files/header.htm") fs;
	mso-footnote-continuation-separator:url("053%20Структурированный%20тип.files/header.htm") fcs;
	mso-endnote-separator:url("053%20Структурированный%20тип.files/header.htm") es;
	mso-endnote-continuation-separator:url("053%20Структурированный%20тип.files/header.htm") ecs;}
@page Section1
	{size:21.0cm 842.0pt;
	margin:33.45pt 42.55pt 72.0pt 89.85pt;
	mso-header-margin:14.2pt;
	mso-footer-margin:31.75pt;
	mso-even-header:url("053%20Структурированный%20тип.files/header.htm") eh1;
	mso-header:url("053%20Структурированный%20тип.files/header.htm") h1;
	mso-even-footer:url("053%20Структурированный%20тип.files/header.htm") ef1;
	mso-footer:url("053%20Структурированный%20тип.files/header.htm") f1;
	mso-first-header:url("053%20Структурированный%20тип.files/header.htm") fh1;
	mso-first-footer:url("053%20Структурированный%20тип.files/header.htm") ff1;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:1523009089;
	mso-list-type:hybrid;
	mso-list-template-ids:1905183944 -995482840 633923072 539019162 473737344 -1209482840 -339444138 218268864 1376275714 -1001494844;}
@list l0:level1
	{mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l0:level2
	{mso-level-start-at:0;
	mso-level-number-format:none;
	mso-level-text:"";
	mso-level-tab-stop:18.0pt;
	mso-level-number-position:left;
	margin-left:0cm;
	text-indent:0cm;}
@list l0:level3
	{mso-level-start-at:0;
	mso-level-number-format:none;
	mso-level-text:"";
	mso-level-tab-stop:18.0pt;
	mso-level-number-position:left;
	margin-left:0cm;
	text-indent:0cm;}
@list l0:level4
	{mso-level-start-at:0;
	mso-level-number-format:none;
	mso-level-text:"";
	mso-level-tab-stop:18.0pt;
	mso-level-number-position:left;
	margin-left:0cm;
	text-indent:0cm;}
@list l0:level5
	{mso-level-start-at:0;
	mso-level-number-format:none;
	mso-level-text:"";
	mso-level-tab-stop:18.0pt;
	mso-level-number-position:left;
	margin-left:0cm;
	text-indent:0cm;}
@list l0:level6
	{mso-level-start-at:0;
	mso-level-number-format:none;
	mso-level-text:"";
	mso-level-tab-stop:18.0pt;
	mso-level-number-position:left;
	margin-left:0cm;
	text-indent:0cm;}
@list l0:level7
	{mso-level-start-at:0;
	mso-level-number-format:none;
	mso-level-text:"";
	mso-level-tab-stop:18.0pt;
	mso-level-number-position:left;
	margin-left:0cm;
	text-indent:0cm;}
@list l0:level8
	{mso-level-start-at:0;
	mso-level-number-format:none;
	mso-level-text:"";
	mso-level-tab-stop:18.0pt;
	mso-level-number-position:left;
	margin-left:0cm;
	text-indent:0cm;}
@list l0:level9
	{mso-level-start-at:0;
	mso-level-number-format:none;
	mso-level-text:"";
	mso-level-tab-stop:18.0pt;
	mso-level-number-position:left;
	margin-left:0cm;
	text-indent:0cm;}
@list l1
	{mso-list-id:1628194852;
	mso-list-type:hybrid;
	mso-list-template-ids:-964799380 -1450833310 68747267 68747269 68747265 68747267 68747269 68747265 68747267 68747269;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-style-link:список;
	mso-level-text:\F0B7;
	mso-level-tab-stop:64.35pt;
	mso-level-number-position:left;
	margin-left:64.35pt;
	text-indent:-18.0pt;
	font-family:Symbol;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Обычная таблица";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman CYR";
	mso-bidi-font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
table.MsoTableGrid
	{mso-style-name:"Сетка таблицы";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	border:solid windowtext 1.0pt;
	mso-border-alt:solid windowtext .5pt;
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-border-insideh:.5pt solid windowtext;
	mso-border-insidev:.5pt solid windowtext;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman CYR";
	mso-bidi-font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
  <o:regrouptable v:ext="edit">
   <o:entry new="1" old="0"/>
   <o:entry new="2" old="1"/>
   <o:entry new="3" old="0"/>
  </o:regrouptable>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=RU style='tab-interval:36.0pt' background="back.gif">

<div class=Section1>

<h2><span style='font-family:Arial;mso-bidi-font-family:"Times New Roman"'>5.3.
Структурированный тип<o:p></o:p></span></h2>

<p class=a3><span style='mso-spacerun:yes'> </span>«Здесь вам не тут…»</p>

<p class=a3><b style='mso-bidi-font-weight:normal'><a name="m1">Из армейского фольклора<o:p></o:p></b></p>

<p class=a>Структурированную переменную можно определить как прямую
противоположность массива. Действительно, «массив – это множество переменных
одного типа, имеющих общее имя, доступ к которым осуществляется по номеру
(индексу)». <span class=GramE>Формально изменив некоторые свойства на
противоположные, получим, что «<b style='mso-bidi-font-weight:normal'><a name="m2">структура
– это множество разнотипных переменных с общим именем, доступ к которым
осуществляется по имени</b>».</span> Структура требует описания всех ее элементов
по отдельности (имена и типы), в то время как для массива оно является общим. </p>

<p class=a0><o:p>&nbsp;</o:p></p>

<p class=a0><span class=SpellE><span class=GramE>struct</span></span><span
class=GramE> <span class=SpellE><b style='mso-bidi-font-weight:normal'><a name="m3">man</b></span>
{<span style='mso-tab-count:2'>                  </span><span style='mso-tab-count:
1'>            </span>// Определение структурированного типа</span></p>

<p class=a0><span style='mso-tab-count:1'>            </span><span
class=SpellE>char</span><span style='mso-tab-count:1'>      </span><span
class=SpellE>name</span>[10]; <span style='mso-tab-count:1'>         </span>//
Элементы структуры<span style='mso-tab-count:1'>  </span>- поля (имена и типы)</p>

<p class=a0><span style='mso-tab-count:1'>            </span><span
class=SpellE><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>int</span></span></span><span
lang=EN-US style='mso-ansi-language:EN-US'><span style='mso-tab-count:1'>         </span><span
class=SpellE>dd,mm,yy</span>; <span style='mso-tab-count:1'>        </span>// <o:p></o:p></span></p>

<p class=a0><span lang=EN-US style='mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>            </span><span class=GramE>char</span><span
style='mso-tab-count:1'>      </span>*address; <span style='mso-tab-count:1'>         </span>//</span></p>

<p class=a0><span style='mso-tab-count:1'>            </span><span lang=EN-US
style='mso-ansi-language:EN-US'>//--------------------------------------------------------------------------------------------------<o:p></o:p></span></p>

<p class=a0>
<span
style='mso-tab-count:1; mso-ansi-language:EN-US' lang="EN-US">            </span><span class=GramE>} A, B,
X[10];<span style='mso-tab-count:1'>     </span><span
style='mso-spacerun:yes'>  </span><span style='mso-tab-count:1'>          </span>//
Определение структурированных переменных</span></p>

<p class=a0><span style='mso-tab-count:2'>                        </span></p>

<p class=a>В описании структуры появляется еще одно нововведение: раздельное
описание структуры как типа данных (формы представления) – <b style='mso-bidi-font-weight:
normal'><a name="m4">структурированного типа, </b>и непосредственно данных - <b
style='mso-bidi-font-weight:normal'>структурированных переменных.</b></p>

<p class=a>Определение структурированного типа начинается с имени <b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-ansi-language:
EN-US'>man</span>, </b>которое идентифицирует структуру как тип данных. Это имя
может использоваться во всех контекстах аналогично любому базовому типу
(например, <span class=SpellE><b style='mso-bidi-font-weight:normal'><a name="m5"><span
lang=EN-US style='mso-ansi-language:EN-US'>int</span></b></span>). Это значит,
что в языке имеется возможность манипулировать структурированными переменными
как базовыми: определять переменные, массивы и указатели, копировать,
передавать по ссылке и по значению, использовать в качестве формальных
параметров и результата функции (в отличие от массивов, возможности
оперирования которыми как единым целым ограничены).</p>

<p class=a0><o:p>&nbsp;</o:p></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>man</span></span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>C</span>,<span
lang=EN-US style='mso-ansi-language:EN-US'>D</span>[20],*<span lang=EN-US
style='mso-ansi-language:EN-US'>p</span>;<span style='mso-tab-count:2'>             </span>//
Структурированная переменная <b style='mso-bidi-font-weight:normal'><a name="m6"><span
lang=EN-US style='mso-ansi-language:EN-US'>C</span></b>, массив переменных <b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-ansi-language:
EN-US'>D</span></b><span lang=EN-US> </span>и указатель <b style='mso-bidi-font-weight:
normal'><a name="m7"><span lang=EN-US style='mso-ansi-language:EN-US'>p</span></b></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>man</span></span>
*<span lang=EN-US style='mso-ansi-language:EN-US'>create</span>() <span
style='mso-tab-count:1'>    </span>{ ... }<span style='mso-tab-count:1'>     </span>//
Функция возвращает указатель на структуру</p>

<p class=a0><span class=SpellE>void</span><span style='mso-spacerun:yes'> 
</span><span class=SpellE>f</span>(<span class=SpellE>man</span> *<span
class=SpellE>q</span>)<span style='mso-tab-count:1'>    </span>{ ...<span
class=GramE> }</span><span style='mso-tab-count:1'>     </span>// Функция
получает параметр - указатель на структуру</p>

<p class=a0><o:p>&nbsp;</o:p></p>

<p class=a>Составляющие структуру «переменные» имеют различные типы и имена, по
которым они идентифицируются. Их называют <b style='mso-bidi-font-weight:normal'><a name="m8">элементами
структуры </b>или <b style='mso-bidi-font-weight:normal'><a name="m9">полями</b>, и они
имеют синтаксис определения обычных переменных. Но они не имеют
самостоятельного статуса и могут использоваться только по отношению к
какой-либо структурированной переменной (аналогично индексам в массиве). В
данном примере структура состоит из массива 10 символов <span class=SpellE><b
style='mso-bidi-font-weight:normal'>name</b></span>, целых переменных <span
class=SpellE><b style='mso-bidi-font-weight:normal'><a name="m10">dd</b></span><b
style='mso-bidi-font-weight:normal'>, <span class=SpellE>mm</span></b> и <span
class=SpellE><b style='mso-bidi-font-weight:normal'><a name="m11">yy</b></span> и указателя
на строку <span class=SpellE><b style='mso-bidi-font-weight:normal'><a name="m12">address</b></span>.</p>

<p class=a>После определения структурированного типа следует список
структурированных переменных. Каждая из них имеет внутреннюю организацию
описанной структуры, то есть полный набор перечисленных полей. Имя
структурированной переменной идентифицирует всю структуру в целом, имена
элементов – составные ее части. В данном случае мы имеем переменные<span
class=GramE> <b style='mso-bidi-font-weight:normal'><a name="m13">А</b></span><b
style='mso-bidi-font-weight:normal'>, B</b> и массив <b style='mso-bidi-font-weight:
normal'><a name="m14">X</b> из 10 структурированных переменных. </p>

<p class=a style="text-align: center">
<img border="0" src="Images/053-01.gif" width="349" height="179"><p class=a0><span style='font-family:"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=a4 align=center style='text-align:center'><b><a name="m15">рис. 53-1. Структурированные
переменные</b></p>

<p class=a>Структурированный тип может быть определен и сам по себе, то есть
без конкретных структурированных переменных.</p>

<p class=a0><o:p>&nbsp;</o:p></p>

<p class=a0><span class=SpellE><span class=GramE><span lang=EN-US
style='mso-ansi-language:EN-US'>struct</span></span></span><span lang=EN-US
style='mso-ansi-language:EN-US'> man<span style='mso-tab-count:1'>         </span>{<span
style='mso-tab-count:2'>                       </span><span
style='mso-spacerun:yes'>  </span><o:p></o:p></span></p>

<p class=a0><span lang=EN-US style='mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>            </span><span class=GramE>char</span><span
style='mso-tab-count:1'>      </span>name[10];<span style='mso-spacerun:yes'> 
</span><o:p></o:p></span></p>

<p class=a0><span lang=EN-US style='mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>            </span><span class=SpellE><span
class=GramE>int</span></span><span style='mso-tab-count:1'>         </span><span
class=SpellE>dd,mm,yy</span>; <o:p></o:p></span></p>

<p class=a0>
<span
style='mso-tab-count:1; mso-ansi-language:EN-US' lang="EN-US">            </span><span class=SpellE>char</span><span
style='mso-tab-count:1'>      </span>*<span class=SpellE>address</span>;</p>

<p class=a0><span style='mso-tab-count:1'>            </span>};</p>

<p class=a>При определении структурированной переменной или массива таких
переменных они могут быть инициализированы списками значений элементов,
заключенных в фигурные скобки и перечисленных через запятую. Типы
инициализирующих констант должны совпадать с типами инициализируемых полей.</p>

<p class=a0><o:p>&nbsp;</o:p></p>

<p class=a0><span class=SpellE>man</span> A = <span class=GramE>{ </span>&quot;Петров&quot;,1,10,1969,&quot;Морская-12&quot;
};</p>

<p class=a0><span class=SpellE>man</span> X[10] =</p>

<p class=a0><span style='mso-tab-count:1'>            </span>{ {
&quot;Смирнов&quot;,12,12,1977,&quot;Дачная-13&quot;<span class=GramE> }</span>,</p>

<p class=a0><span style='mso-tab-count:1'>            </span><span
style='mso-spacerun:yes'>  </span>{ &quot;Иванов&quot;
,21,03,1945,&quot;Северная-21&quot;<span class=GramE> }</span>,</p>

<p class=a0><span style='mso-tab-count:1'>            </span><span
style='mso-spacerun:yes'>  </span>{ .................................. }</p>

<p class=a0><span style='mso-tab-count:1'>            </span>};</p>

<p class=a>Способ работы со структурированной переменной вытекает из ее
аналогии с массивом. Точно так же, как нельзя выполнить операцию над всем
массивом, но можно над отдельным его элементом, структуру можно обрабатывать,
выделяя отдельные элементы (поля). Для этой цели существует операция <b
style='mso-bidi-font-weight:normal'>&quot;<span class=GramE>.&quot;</span> </b>(точка),
аналогичная операции <b style='mso-bidi-font-weight:normal'><a name="m16">[]</b> в массиве. В
структурированной переменной она выделяет элемент с заданным именем.</p>

<p class=a0><o:p>&nbsp;</o:p></p>

<p class=a0><span class=SpellE>A.name</span> <span style='mso-tab-count:1'>            </span>//
элемент <span class=SpellE>name</span> структурированной переменной A </p>

<p class=a0><span class=SpellE>B.dd</span> <span style='mso-tab-count:2'>                </span>//
элемент <span class=SpellE>dd</span> структурированной переменной B </p>

<p class=a0><o:p>&nbsp;</o:p></p>

<p class=a>Если поле структурированной переменной является не простой
переменной, а массивом или указателем, то для него применимы соответствующие
ему операции<span class=GramE> ( <b style='mso-bidi-font-weight:normal'><a name="m17">[],* </b></span>и
адресная арифметика): </p>

<p class=a0><o:p>&nbsp;</o:p></p>

<p class=a0><span class=SpellE>A.name</span>[<span class=SpellE>i</span>] <span
style='mso-tab-count:2'>                     </span>// <span class=SpellE>i-й</span>
элемент массива <span class=SpellE>name</span>, который является<span
style='mso-spacerun:yes'>  </span></p>

<p class=a0>
<span
style='mso-tab-count:3; font-family:Courier New; mso-bidi-font-family:Times New Roman'>                  </span>// элементом
структурированной переменной A </p>

<p class=a0>*<span class=SpellE>B.address</span> <span style='mso-tab-count:
1'>       </span><span style='mso-tab-count:1'>            </span>// косвенное
обращение по указателю <span class=SpellE>address</span>,<span
style='mso-spacerun:yes'>  </span></p>

<p class=a0>
<span
style='mso-tab-count:3; font-family:Courier New; mso-bidi-font-family:Times New Roman'>                  </span>// <span class=GramE>который</span>
является элементом структурированной<span style='mso-spacerun:yes'>  </span><span
style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'><o:p></o:p></span></p>

<p class=a0>
<span
style='mso-tab-count:3; font-family:Courier New; mso-bidi-font-family:Times New Roman'>                  </span>// переменной B </p>

<p class=a0><span class=SpellE>B.address</span>[<span lang=EN-US
style='mso-ansi-language:EN-US'>j</span>] <span style='mso-tab-count:1'>                  </span>// индексация по указателю <span
class=SpellE>address</span>,<span style='mso-spacerun:yes'>  </span></p>

<p class=a0>
<span
style='mso-tab-count:3; font-family:Courier New; mso-bidi-font-family:Times New Roman'>                  </span>// <span class=GramE>который</span>
является элементом структурированной<span style='mso-spacerun:yes'>  </span><span
style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'><o:p></o:p></span></p>

<p class=a0>
<span
style='mso-tab-count:3; font-family:Courier New; mso-bidi-font-family:Times New Roman'>                  </span>// переменной B </p>

<p class=a><o:p>&nbsp;</o:p></p>

<h3>Свойства структурированного типа</h3>

<p class=a4>
<img border="0" src="Images/story.jpg" width="44" height="27" align="left">Различие между массивом и структурированной
переменной имеет исторические и технологические корни. Исторически массив в
языках программирования появился еще тогда, когда понятия <b style='mso-bidi-font-weight:
normal'><a name="m18">типа данных </b>не было и в помине (языки<span
style='mso-spacerun:yes'>  </span>Алгол, Фортран, первоначальный Бейсик). Он
является <span class=GramE>более архитектурно-ориентированным</span> элементом,
работа с ним в большей степени соответствует работе процессора с областью
памяти (например, передача по ссылке соответствует получению функцией адреса
массива). Структура – более позднее и более абстрактное образование. <span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></p>

<p class=a>Кроме того, структурированная переменная технологически
ассоциируется с понятием «объект» (а ее описание – с классом). Это приводит к
более свободному манипулирован<span class=GramE>ию ею</span> в программе. Структурированные
переменные можно присваивать друг другу, передавать в качестве формальных
параметров и возвращать как результат функции по значению, а не только через
указатель. При этом происходит копирование всей структурированной переменной
«байт в байт».</p>

<p class=a0><o:p>&nbsp;</o:p></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>void<span
style='mso-spacerun:yes'>  </span>FF</span></span><span lang=EN-US
style='mso-ansi-language:EN-US'>(man X){ …}<o:p></o:p></span></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>void</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'> main(){<o:p></o:p></span></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>man</span></span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>A</span>,<span
lang=EN-US style='mso-ansi-language:EN-US'>B</span>[10],*<span lang=EN-US
style='mso-ansi-language:EN-US'>p</span>; </p>

<p class=a0><span lang=EN-US style='mso-ansi-language:EN-US'>A</span>=<span
class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>B</span>[</span>4];<span
style='mso-tab-count:1'> </span><span style='mso-tab-count:2'>                        </span>//
Прямое присваивание структур </p>

<p class=a0><span lang=EN-US style='mso-ansi-language:EN-US'>p</span>=&amp;<span
lang=EN-US style='mso-ansi-language:EN-US'>A</span>; <span style='mso-tab-count:
1'>  </span><span style='mso-tab-count:2'>                        </span>// Присваивание
через косвенное обращение по указателю</p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>B</span>[</span>0]=*<span
lang=EN-US style='mso-ansi-language:EN-US'>p</span>;<span style='mso-tab-count:
1'>            </span><span style='mso-tab-count:2'>            </span>//
<span lang=EN-US style='mso-ansi-language:EN-US'>B</span>[0]=<span lang=EN-US
style='mso-ansi-language:EN-US'>A</span></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>FF</span>(</span><span
lang=EN-US style='mso-ansi-language:EN-US'>A</span>); }<span style='mso-tab-count:
1'> </span><span style='mso-tab-count:2'>                        </span>// Присваивание
при передаче по значению <span lang=EN-US style='mso-ansi-language:EN-US'>X</span>=<span
lang=EN-US style='mso-ansi-language:EN-US'>A</span></p>

<p class=a><b style='mso-bidi-font-weight:normal'><a name="m19">Указатель на
структурированную переменную. </b>То, что указатели на структурированные
переменные имеют широкое распространение, подтверждается наличием в Си
специальной операции <b style='mso-bidi-font-weight:normal'><a name="m20">&quot;-&gt;&quot;</b>
(«<span class=SpellE><span class=GramE>минус-больше</span></span>»), которая
понимается как выделение элемента в структурированной переменной, адресуемой
указателем. То есть, операндами здесь являются указатель на структуру и имя элемента
структуры. Операция имеет полный аналог в виде сочетания операций <b
style='mso-bidi-font-weight:normal'>&quot;*&quot; </b>и<b style='mso-bidi-font-weight:
normal'><a name="m21"> &quot;<span class=GramE>.&quot;</span>:</b> </p>

<p class=a0>
<p><img border="0" src="Images/053-02.gif" width="303" height="107"><br
style='mso-ignore:vglayout' clear=ALL>
<span style='mso-tab-count:2'>                        </span></p>
</p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>man</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'> *<span class=SpellE>p,A</span>;<o:p></o:p></span></p>

<p class=a0><span lang=EN-US style='mso-ansi-language:EN-US'>p = &amp;A; <o:p></o:p></span></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>p</span></span>-&gt;<span
lang=EN-US style='mso-ansi-language:EN-US'>mm</span>;<span
style='mso-spacerun:yes'>  </span><span style='mso-tab-count:1'>           </span>//
эквивалентно (*<span lang=EN-US style='mso-ansi-language:EN-US'>p</span>).<span
lang=EN-US style='mso-ansi-language:EN-US'>mm<o:p></o:p></span></p>

<p class=a><b style='mso-bidi-font-weight:normal'><a name="m22">Структурированная переменная <span
style='mso-spacerun:yes'> </span>- формальный параметр и результат
функции.<span style='mso-spacerun:yes'>  </span></b>В отличие от массива,
передаваемого только по ссылке (либо явно через указатель), структура может
быть передана и возвращена функции всеми возможными способами: по значению, по
ссылке и через указатель. Поскольку Си является языком, приближенным к
архитектуре компьютера, программисту известны механизмы передачи параметров и
он может оценивать затраты времени и памяти в различных вариантах, особенно
если размер структурированной переменной достаточно велик:</p>

<p class=a1><![if !supportLists]>
<span style='mso-list:Ignore; font-family:Symbol; mso-fareast-font-family:Symbol; mso-bidi-font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span class=GramE>при передаче указателя или
ссылки и возвращении их в качестве результата через стек передается адрес
структурированной переменной (, имеющий размерность машинного слова.</span> Сама
структурированная переменная доступна через указатель (ссылку) «по записи»;</p>

<p class=a0><o:p>&nbsp;</o:p></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>void</span></span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>proc</span>(<span
lang=EN-US style='mso-ansi-language:EN-US'>man</span> *<span lang=EN-US
style='mso-ansi-language:EN-US'>p</span>){ <span lang=EN-US style='mso-ansi-language:
EN-US'>p</span>-&gt;<span class=SpellE><span lang=EN-US style='mso-ansi-language:
EN-US'>dd</span></span>++; }<span style='mso-tab-count:1'>      </span>// Для
доступа к структуре через указатель</p>

<p class=a0><span style='mso-tab-count:4'>                                                </span>//
используется операция -&gt;</p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>void</span></span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>proc</span>1(<span
lang=EN-US style='mso-ansi-language:EN-US'>man</span> &amp;<span lang=EN-US
style='mso-ansi-language:EN-US'>B</span>){ <span lang=EN-US style='mso-ansi-language:
EN-US'>B</span>.<span class=SpellE><span lang=EN-US style='mso-ansi-language:
EN-US'>dd</span></span>++; }<span style='mso-tab-count:1'>    </span>// Структура-прототип
через ссылку</p>

<p class=a0><span style='mso-tab-count:3'>                                    </span>
<span style='mso-tab-count:1; mso-ansi-language:EN-US' lang="EN-US">            </span>//
<span class=GramE>доступна</span> «по записи»</p>

<p class=a0><span lang=EN-US style='mso-ansi-language:EN-US'>void main(){ man
A={…,12,5,2001,…};<span style='mso-tab-count:1'>     </span>proc(&amp;A);
proc1(A); }<o:p></o:p></span></p>

<p class=a1><![if !supportLists]>
<span style='mso-list:Ignore; font-family:Symbol; mso-fareast-font-family:Symbol; mso-bidi-font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>при передаче по значению в стек помещается копия
структурированной переменной – фактического параметра, которая может занимать в
нем «довольно много места», а копирование – «довольно много времени»;</p>

<p class=a0><o:p>&nbsp;</o:p></p>

<p class=a0><span class=SpellE><span class=GramE><span lang=EN-US
style='mso-ansi-language:EN-US'>struct</span></span></span><span lang=EN-US
style='mso-ansi-language:EN-US'> man{ …<span class=SpellE>int</span> <span
class=SpellE>dd,mm,yy</span>;…};<span style='mso-tab-count:1'>  </span><o:p></o:p></span></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>void</span></span><span
lang=EN-US> </span><span lang=EN-US style='mso-ansi-language:EN-US'>proc</span>(<span
lang=EN-US style='mso-ansi-language:EN-US'>man</span><span lang=EN-US> </span><span
lang=EN-US style='mso-ansi-language:EN-US'>B</span>){<span style='mso-tab-count:
1'>           </span><span style='mso-tab-count:1'>            </span>// Копия
структуры – фактического параметра</p>

<p class=a0><span style='mso-tab-count:1'>            </span><span lang=EN-US
style='mso-ansi-language:EN-US'>x</span>=<span lang=EN-US style='mso-ansi-language:
EN-US'>B</span>.<span class=SpellE><span lang=EN-US style='mso-ansi-language:
EN-US'>dd</span></span>;<span style='mso-tab-count:1'>                         </span>//
читается, а при изменении не влияет</p>

<p class=a0 style='text-indent:36.0pt'><span lang=EN-US style='mso-ansi-language:
EN-US'>B</span>.<span class=SpellE><span lang=EN-US style='mso-ansi-language:
EN-US'>dd</span></span>++<span class=GramE>; }</span><span style='mso-tab-count:
2'>                      </span>// на оригинал (<span lang=EN-US
style='mso-ansi-language:EN-US'>A</span>.<span class=SpellE><span lang=EN-US
style='mso-ansi-language:EN-US'>dd</span></span><span lang=EN-US> </span>не
меняется)</p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>void</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'> main(){<o:p></o:p></span></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>man</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'> A={…,12,5,2001,…};<span
style='mso-tab-count:1'>           </span><o:p></o:p></span></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>proc(</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'>A);<span style='mso-spacerun:yes'> 
</span>}<span style='mso-tab-count:3'>                                  </span>//
</span>Эквивалент<span style='mso-ansi-language:EN-US'> <span lang=EN-US>B=A<o:p></o:p></span></span></p>

<p class=a1><![if !supportLists]>
<span style='mso-list:Ignore; font-family:Symbol; mso-fareast-font-family:Symbol; mso-bidi-font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>при возвращении в качестве результата указателя
или ссылки передается адрес структурированной переменной, для которого не
требуется «много места» (передается обычно в регистрах процессора). О характере
<span class=SpellE>указуемой</span> переменной уже упоминалось в <b
style='mso-bidi-font-weight:normal'>5.2</b>. Она не может быть локальной
переменной или формальным параметром-значением, но может быть динамической
переменной, создаваемой функцией (см.<b style='mso-bidi-font-weight:normal'><a name="m23">5.6</b>).
Она может быть также указателем на глобальные переменные, либо на переменные,
переданные на вход функции через указатель (ссылку);</p>

<p class=a1><![if !supportLists]>
<span style='mso-list:Ignore; font-family:Symbol; mso-fareast-font-family:Symbol; mso-bidi-font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>при возвращении структуры по значению в
вызывающей функции транслятором создается временная структурированная
переменная, а вызываемая функция получает указатель на эту переменную. При
выполнении операции <b style='mso-bidi-font-weight:normal'><a name="m24"><span lang=EN-US
style='mso-ansi-language:EN-US'>return</span><span lang=EN-US> </span></b>происходит
копирование возвращаемой переменной во временную переменную через указатель,
что может занимать «довольно много времени», а временная переменная – «довольно
много места».</p>

<p class=a0><o:p>&nbsp;</o:p></p>

<p class=a0><span class=SpellE><span class=GramE><span lang=EN-US
style='mso-ansi-language:EN-US'>struct</span></span></span><span lang=EN-US> </span><span
lang=EN-US style='mso-ansi-language:EN-US'>man</span>{ …<span class=SpellE><span
lang=EN-US style='mso-ansi-language:EN-US'>int</span></span><span lang=EN-US> </span><span
class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>dd</span></span>,<span
lang=EN-US style='mso-ansi-language:EN-US'>mm</span>,<span class=SpellE><span
lang=EN-US style='mso-ansi-language:EN-US'>yy</span></span>;…};<span
style='mso-tab-count:1'>              </span>//
Эквивалент программы</p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>man</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'> proc( man X){<span
style='mso-tab-count:3'>                                  </span>// man
proc(man *out, man X){<o:p></o:p></span></p>

<p class=a0><span class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>X.dd</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'>++;<span style='mso-tab-count:5'>                                                 </span>//
<span class=SpellE>X.dd</span>++;<o:p></o:p></span></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>return</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'> X;}<span style='mso-tab-count:4'>                                               </span>//
*out = X;<o:p></o:p></span></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>void</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'> main(){<span style='mso-tab-count:
4'>                                            </span>// man <span
class=SpellE>tmp</span>;<o:p></o:p></span></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>man</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'> A={…,12,5,2001,…};<span
style='mso-tab-count:2'>                       </span>// X=A; out = &amp;<span
class=SpellE>tmp</span>;<o:p></o:p></span></p>

<p class=a0><span lang=EN-US style='mso-ansi-language:EN-US'>y</span>=<span
class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>proc</span>(</span><span
lang=EN-US style='mso-ansi-language:EN-US'>A</span>).<span class=SpellE><span
lang=EN-US style='mso-ansi-language:EN-US'>dd</span></span>; <span
style='mso-tab-count:1'>   </span><span style='mso-tab-count:3'>                                    </span>//
выполнить тело <span lang=EN-US style='mso-ansi-language:EN-US'>proc</span></p>

<p class=a0><span class=GramE>}<span style='mso-tab-count:5'>                                                           </span>//
<span lang=EN-US style='mso-ansi-language:EN-US'>y</span>=<span class=SpellE><span
lang=EN-US style='mso-ansi-language:EN-US'>tmp</span></span>.<span
class=SpellE><span lang=EN-US style='mso-ansi-language:EN-US'>dd</span></span>;</span></p>

<h3>Структурированный тип как класс</h3>

<p class=a>Структурированная переменная в программе может выступать как
«изображение» внешнего объекта, к которым работает программа. Это может быть
физический объект внешнего мира, а может быть логический (программный) объект
(например, файл). Структурированный тип в таком случае выступает как описание
внешней <b style='mso-bidi-font-weight:normal'><a name="m25">сущности<span
style='mso-spacerun:yes'>  </span>(</b>или <b style='mso-bidi-font-weight:normal'><a name="m26">класса).
</b>Элементы (поля) структуры выступают как <b style='mso-bidi-font-weight:
normal'><a name="m27">свойства </b>объекта. </p>

<p class=a>В такой интерпретации объект содержит только данные и ему не хватает
алгоритмической компоненты. По аналогии с полями, в структурированный тип
встраиваются функции, которые по умолчанию работают с некоторой «текущей»
структурированной переменной (объектом). «Официально» они называются <b
style='mso-bidi-font-weight:normal'>элементами-функциями </b>или <b
style='mso-bidi-font-weight:normal'>функциями-членами класса. </b>Рассмотрим
правила их определения и использования:</p>

<p class=a0><o:p>&nbsp;</o:p></p>

<p class=a0><span class=SpellE><span class=GramE>struct</span></span><span
class=GramE> <span class=SpellE>man</span> {<span style='mso-tab-count:2'>                   </span><span
style='mso-tab-count:1'>            </span>// Определение структурированного
типа</span></p>

<p class=a0><span style='mso-tab-count:1'>            </span><span
class=SpellE>char</span><span style='mso-tab-count:1'>      </span><span
class=SpellE>name</span>[10]; <span style='mso-tab-count:1'>         </span>//
Элементы структуры<span style='mso-tab-count:1'>  </span>- поля (имена и типы)</p>

<p class=a0><span style='mso-tab-count:1'>            </span><span
class=SpellE><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>int</span></span></span><span
lang=EN-US style='mso-ansi-language:EN-US'><span style='mso-tab-count:1'>         </span><span
class=SpellE>dd,mm,yy</span>; <span style='mso-tab-count:1'>        </span>// <o:p></o:p></span></p>

<p class=a0><span lang=EN-US style='mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>            </span><span class=GramE>char</span><span
style='mso-tab-count:1'>      </span>*address; <span style='mso-tab-count:1'>         </span>//<o:p></o:p></span></p>

<p class=a0 style='margin-left:108.0pt;text-indent:36.0pt'><span lang=EN-US
style='mso-ansi-language:EN-US'>// </span><b style='mso-bidi-font-weight:normal'><a name="m28">Вариант<span style='mso-ansi-language:EN-US'> <span
lang=EN-US>1</span></span></b></p>

<p class=a0><span style='mso-tab-count:1'>            </span><span class=GramE><span
lang=EN-US style='mso-ansi-language:EN-US'>void</span></span><span lang=EN-US
style='mso-ansi-language:EN-US'> <span class=SpellE><b style='mso-bidi-font-weight:
normal'><a name="m29">setData</b></span>(<span class=SpellE>int</span> d0, <span
class=SpellE>int</span> m0, <span class=SpellE>int</span> y0)<o:p></o:p></span></p>

<p class=a0 style='margin-left:36.0pt;text-indent:36.0pt'><span class=GramE><span
lang=EN-US style='mso-ansi-language:EN-US'>{ <span class=SpellE><b
style='mso-bidi-font-weight:normal'>dd</b></span></span></span><span
lang=EN-US style='mso-ansi-language:EN-US'>=m0; <b style='mso-bidi-font-weight:
normal'><a name="m30">mm</b>=m0; <span class=SpellE><b style='mso-bidi-font-weight:normal'><a name="m31">yy</b></span>=y0;<span
style='mso-spacerun:yes'>  </span>}<o:p></o:p></span></p>

<p class=a0><span lang=EN-US style='mso-ansi-language:EN-US'><span
style='mso-tab-count:1'>            </span><span class=GramE>void</span> <span
class=SpellE><b style='mso-bidi-font-weight:normal'><a name="m32">incData</b></span>();<span
style='mso-tab-count:2'>               </span>// </span><b style='mso-bidi-font-weight:
normal'><a name="m33">Вариант</b><b style='mso-bidi-font-weight:normal'><a name="m34"><span lang=EN-US
style='mso-ansi-language:EN-US'> 2</span></b><span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></p>

<p class=a0 style='text-indent:36.0pt'><span class=GramE><span lang=EN-US
style='mso-ansi-language:EN-US'>void</span></span><span lang=EN-US
style='mso-ansi-language:EN-US'> <span class=SpellE><b style='mso-bidi-font-weight:
normal'><a name="m35">plusData</b></span>(<span class=SpellE>int</span>);<span
style='mso-tab-count:1'>         </span>// </span><b style='mso-bidi-font-weight:
normal'><a name="m36">Вариант</b><b style='mso-bidi-font-weight:normal'><a name="m37"><span
style='mso-ansi-language:EN-US'> <span lang=EN-US>2<o:p></o:p></span></span></b></p>

<p class=a0 style='text-indent:36.0pt'><span class=GramE><span lang=EN-US
style='mso-ansi-language:EN-US'>void</span></span><span lang=EN-US
style='mso-ansi-language:EN-US'> <span class=SpellE><b style='mso-bidi-font-weight:
normal'><a name="m38">plusData</b></span>(<span class=SpellE>int</span> k){<span
style='mso-tab-count:1'>       </span>// </span><b style='mso-bidi-font-weight:
normal'><a name="m39">Вариант</b><b style='mso-bidi-font-weight:normal'><a name="m40"><span
style='mso-ansi-language:EN-US'> <span lang=EN-US>1<o:p></o:p></span></span></b></p>

<p class=a0 style='margin-left:72.0pt'><span class=GramE><span lang=EN-US
style='mso-ansi-language:EN-US'>{ while</span></span><span lang=EN-US
style='mso-ansi-language:EN-US'>(k--!=0) <span class=SpellE><b
style='mso-bidi-font-weight:normal'>incData</b></span>(); }<o:p></o:p></span></p>

<p class=a0>
<span
style='mso-tab-count:1; mso-ansi-language:EN-US' lang="EN-US">            </span>//--------------------------------------------------------------------------------------------------</p>

<p class=a0><span style='mso-tab-count:1'>            </span><span class=GramE>}
A, B, X[10];<span style='mso-tab-count:1'>     </span><span
style='mso-spacerun:yes'>  </span><span style='mso-tab-count:1'>          </span>//
Определение структурированных переменных</span></p>

<p class=a0><span lang=EN-US style='mso-ansi-language:EN-US'><o:p>&nbsp;</o:p></span></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>void</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'> <span class=SpellE><b
style='mso-bidi-font-weight:normal'>man::plusData</b></span>(<span
class=SpellE>int</span> k)<span style='mso-tab-count:1'>           </span>// </span><b
style='mso-bidi-font-weight:normal'>Вариант</b><b style='mso-bidi-font-weight:
normal'><a name="m41"><span style='mso-ansi-language:EN-US'> <span lang=EN-US>2</span></span></b><span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></p>

<p class=a0 style='text-indent:36.0pt'><span class=GramE><span lang=EN-US
style='mso-ansi-language:EN-US'>{ while</span></span><span lang=EN-US
style='mso-ansi-language:EN-US'>(k--!=0) <span class=SpellE><b
style='mso-bidi-font-weight:normal'>incData</b></span>(); }<o:p></o:p></span></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>void</span></span><span
lang=EN-US> </span><b style='mso-bidi-font-weight:normal'><a name="m42"><span lang=EN-US
style='mso-ansi-language:EN-US'>man</span>::</b><span class=SpellE><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-ansi-language:
EN-US'>incData</span></b></span>()<span style='mso-tab-count:1'>       </span>
<span style='mso-tab-count:1; mso-ansi-language:EN-US' lang="EN-US">            </span>//
<b style='mso-bidi-font-weight:normal'><a name="m43">Вариант 2</b></p>

<p class=a0 style='text-indent:36.0pt'>{<span style='mso-spacerun:yes'> 
</span><span class=SpellE><b style='mso-bidi-font-weight:normal'><a name="m44"><span
lang=EN-US style='mso-ansi-language:EN-US'>dd</span></b></span><b
style='mso-bidi-font-weight:normal'>++</b>; <span lang=EN-US style='mso-ansi-language:
EN-US'>if</span> (<span class=SpellE><b style='mso-bidi-font-weight:normal'><a name="m45"><span
lang=EN-US style='mso-ansi-language:EN-US'>dd</span></b></span>==32) <span
class=SpellE><b style='mso-bidi-font-weight:normal'><a name="m46"><span lang=EN-US
style='mso-ansi-language:EN-US'>dd</span></b></span>=1; <span lang=EN-US
style='mso-ansi-language:EN-US'>if</span> (<span class=SpellE><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-ansi-language:
EN-US'>dd</span></b></span>==31 &amp;&amp; <b style='mso-bidi-font-weight:normal'><a name="m47"><span
lang=EN-US style='mso-ansi-language:EN-US'>mm</span></b>…)…<span class=GramE> }</span>}<span
lang=EN-US style='mso-ansi-language:EN-US'><o:p></o:p></span></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>void</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'> main(){<o:p></o:p></span></p>

<p class=a0 style='text-indent:36.0pt'><span class=GramE><b style='mso-bidi-font-weight:
normal'><a name="m48"><span lang=EN-US style='mso-ansi-language:EN-US'>A</span>.</b><span
class=SpellE><b style='mso-bidi-font-weight:normal'><a name="m49"><span lang=EN-US
style='mso-ansi-language:EN-US'>setData</span></b></span>(</span>5,12,1986); <b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-ansi-language:
EN-US'>A</span>.</b><span class=SpellE><b style='mso-bidi-font-weight:normal'><a name="m50"><span
lang=EN-US style='mso-ansi-language:EN-US'>plusData</span></b></span><span
lang=EN-US style='mso-ansi-language:EN-US'>(16); </span><span
style='mso-spacerun:yes'> </span>}<span lang=EN-US style='mso-ansi-language:
EN-US'><o:p></o:p></span></p>

<p class=a1><![if !supportLists]>
<span style='mso-list:Ignore; font-family:Symbol; mso-fareast-font-family:Symbol; mso-bidi-font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>в текст определения структурированного типа
можно включить заголовок (а, возможно, и тело) функции;</p>

<p class=a1><![if !supportLists]>
<span style='mso-list:Ignore; font-family:Symbol; mso-fareast-font-family:Symbol; mso-bidi-font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>в теле функции работает <b style='mso-bidi-font-weight:
normal'><a name="m51">конте<span class=GramE>кст стр</span>уктуры (класса). </b>Это означает,
что имена элементов (полей) структуры, а также других встроенных функций можно
использовать непосредственно, без указания каких-либо путей, префиксов и т.п<span
class=GramE>.. </span>Все они имеют отношение к <b style='mso-bidi-font-weight:
normal'><a name="m52">текущему объекту </b>(текущей структурированной переменной), с которой
в данный момент работает функция;</p>

<p class=a1><![if !supportLists]>
<span style='mso-list:Ignore; font-family:Symbol; mso-fareast-font-family:Symbol; mso-bidi-font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>тело функции может быть включено непосредственно
в определение структурированного типа вслед за заголовком (вариант 1);</p>

<p class=a1><![if !supportLists]>
<span style='mso-list:Ignore; font-family:Symbol; mso-fareast-font-family:Symbol; mso-bidi-font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>тело функции может быть синтаксически вынесено
за пределы определения структурированного типа. Тогда в определении остается
только заголовок - объявление. Определение функции (заголовок и тело) дается
отдельно, причем в заголовке имя функции присутствует в виде <b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-ansi-language:
EN-US'>man</span>::</b><span class=SpellE><b style='mso-bidi-font-weight:normal'><a name="m53"><span
lang=EN-US style='mso-ansi-language:EN-US'>incData</span></b></span><b
style='mso-bidi-font-weight:normal'><span lang=EN-US> </span>– </b>т.е.
включает в себя имя структурированного типа. Этим обозначается, что функция не
является самостоятельной, а<span style='mso-spacerun:yes'>  </span>принадлежит
к этому типу (классу);</p>

<p class=a1><![if !supportLists]>
<span style='mso-list:Ignore; font-family:Symbol; mso-fareast-font-family:Symbol; mso-bidi-font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>вызов встроенной функции производится только в
«связке» со структурированной переменной в виде <span class=SpellE><b
style='mso-bidi-font-weight:normal'>переменная<span class=GramE>.ф</span>ункция</b></span><b
style='mso-bidi-font-weight:normal'>(),<span style='mso-spacerun:yes'>  </span></b>при
этом переменная интерпретируется как «текущая», с контекстом которой работает
функция.</p>

<p class=a>Механизм реализации встроенных функций достаточно прозрачен. На
самом деле – это обычные функции, которые имеют неявный параметр – указатель на
текущую структурированную переменную того типа, в который встроена функция. В <span
class=SpellE>Си++</span> этот указатель может быть использован явно и обозначается
в контексте любой такой функции служебным словом <b style='mso-bidi-font-weight:
normal'><a name="m54"><span lang=EN-US style='mso-ansi-language:EN-US'>this</span></b>. При
вызове такой функции ей передается адрес переменной, с которой она будет
работать. Вот так будет выглядеть эквивалент приведенного выше примера при
использовании «обычных» функций.</p>

<p class=a0 style='margin-left:108.0pt;text-indent:36.0pt'><o:p>&nbsp;</o:p></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>void</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'> <span class=SpellE>man_setData</span>(<b
style='mso-bidi-font-weight:normal'>man *this</b>, <span class=SpellE>int</span>
d0, <span class=SpellE>int</span> m0, <span class=SpellE>int</span> y0)<o:p></o:p></span></p>

<p class=a0 style='margin-left:36.0pt;text-indent:36.0pt'><span class=GramE><span
lang=EN-US style='mso-ansi-language:EN-US'>{ <b style='mso-bidi-font-weight:
normal'><a name="m55">this</b></span></span><span lang=EN-US style='mso-ansi-language:EN-US'>-&gt;<span
class=SpellE>dd</span>=m0; <b style='mso-bidi-font-weight:normal'><a name="m56">this</b>-&gt;mm=m0;
<b style='mso-bidi-font-weight:normal'><a name="m57">this</b>-&gt;<span class=SpellE>yy</span>=y0;<span
style='mso-spacerun:yes'>  </span>}<o:p></o:p></span></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>void</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'> <span class=SpellE>man_plusData</span>(<b
style='mso-bidi-font-weight:normal'>man *this</b>, <span class=SpellE>int</span>
k)<o:p></o:p></span></p>

<p class=a0 style='text-indent:36.0pt'><span class=GramE><span lang=EN-US
style='mso-ansi-language:EN-US'>{ while</span></span><span lang=EN-US
style='mso-ansi-language:EN-US'>(<b style='mso-bidi-font-weight:normal'><a name="m58">this-&gt;</b>k--!=0)
<span class=SpellE>man_incData</span>(<b style='mso-bidi-font-weight:normal'><a name="m59">this</b>);
}<o:p></o:p></span></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>void</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'> <span class=SpellE>man_incData</span>(<b
style='mso-bidi-font-weight:normal'>man *this</b>,)<span style='mso-tab-count:
2'>                 </span><o:p></o:p></span></p>

<p class=a0 style='text-indent:36.0pt'><span class=GramE><span lang=EN-US
style='mso-ansi-language:EN-US'>{<span style='mso-spacerun:yes'>  </span><b
style='mso-bidi-font-weight:normal'>this</b></span></span><span lang=EN-US
style='mso-ansi-language:EN-US'>-&gt;<span class=SpellE>dd</span>++; if (<b
style='mso-bidi-font-weight:normal'>this</b>-&gt;<span class=SpellE>dd</span>==32)
<b style='mso-bidi-font-weight:normal'><a name="m60">this</b>-&gt;<span class=SpellE>dd</span>=1;
if (<b style='mso-bidi-font-weight:normal'><a name="m61">this</b>-&gt;<span class=SpellE>dd</span>==31
&amp;&amp; <b style='mso-bidi-font-weight:normal'><a name="m62">this</b>-&gt;mm…)… }}<o:p></o:p></span></p>

<p class=a0><span class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>void</span></span><span
lang=EN-US style='mso-ansi-language:EN-US'> main(){<o:p></o:p></span></p>

<p class=a0 style='text-indent:36.0pt'><span class=SpellE><span lang=EN-US
style='mso-ansi-language:EN-US'>man_<span class=GramE>setData</span></span></span><span
class=GramE><span lang=EN-US style='mso-ansi-language:EN-US'>(</span></span><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='mso-ansi-language:
EN-US'>&amp;A</span></b><span lang=EN-US style='mso-ansi-language:EN-US'>,5,12,1986);
<span class=SpellE>man_plusData</span>(<b style='mso-bidi-font-weight:normal'><a name="m63">&amp;A,</b>16);<span
style='mso-spacerun:yes'>  </span>}<o:p></o:p></span></p>

<p class=a>Из примера видно, что использование встроенных функций дает более
компактную запись программы благодаря использованию контекста класса, а по
своей сути представляет собой программирование и использованием указателей на
структурированные переменные. Здесь мы сознательно не вторгаемся в область
объектно-ориентированного программирования и ограничиваемся использованием
встроенных функций как средством «экономии синтаксиса».</p>
<h3>Объединение</h3>
<p class="a">Объединение представляет собой структурированную переменную с 
несколько иным способом размещения элементов в памяти. Если в структуре (как и в 
массиве) элементы расположены последовательно друг за другом, то в объединении 
«параллельно». То есть для их размещения выделяется одна общая память, в которой 
они перекрывают друг друга и имеют в ней общий адрес. Размерность ее 
определяется максимальной размерностью элемента объединения. Синтаксис 
объединения полностью совпадает с синтаксисом структуры, только ключевое слово
<b><a name="m64">struct</b> заменяется на <b><a name="m65">union</b>.</p>
<p class="a">Назначение объединения заключается не в экономии памяти, как может 
показаться на первый взгляд. На самом деле оно является одним из инструментов 
управления памятью на принципах, принятых в Си. В <b><a name="m66">9.2</b> мы увидим, как 
использование указателей различных типов позволяет реализовать эти принципы. 
Здесь же, не вдаваясь в подробности, отметим одно важное свойство: если записать 
в один элемент объединения некоторое значение, то через другой элемент это же 
содержимое памяти можно прочитать уже в другой форме представления (как 
переменную другого типа). Естественно, что при таком манипулировании внутренним 
представлением данных, необходимо знать их форматы и размерность. </p>
<p class=a>&nbsp;</p>

<p class=a4><o:p>&nbsp;</o:p></p>

</div>

</body>

</html>
